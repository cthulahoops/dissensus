-- Migration: Fix security vulnerability
-- Remove the dangerous policy that allows anonymous users to query public_shares

-- Drop the dangerous policy
DROP POLICY IF EXISTS "Anonymous can read valid shares" ON public_shares;

-- The correct approach is to not validate the share token client-side at all
-- Instead, just try to fetch the data using the RPC function
-- If the token is invalid, the RPC will return no results
